module.exports = class Data1719338333390 {
    name = 'Data1719338333390'

    async up(db) {
        await db.query(`CREATE TABLE "lrt_deposit" ("id" character varying NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "block_number" integer NOT NULL, "referral_id" text NOT NULL, "depositor" text NOT NULL, "asset" text NOT NULL, "deposit_amount" numeric NOT NULL, "amount_received" numeric NOT NULL, CONSTRAINT "PK_ad21ac1aaeea740bd658dd5b7f5" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_1710650fa59a4c8ff61af698b3" ON "lrt_deposit" ("timestamp") `)
        await db.query(`CREATE INDEX "IDX_14fae3388d6cb222f07f3d2584" ON "lrt_deposit" ("block_number") `)
        await db.query(`CREATE INDEX "IDX_229ca7f410f04404b865d2830f" ON "lrt_deposit" ("referral_id") `)
        await db.query(`CREATE INDEX "IDX_0a317fd9c746c1695a7515e8fb" ON "lrt_deposit" ("depositor") `)
        await db.query(`CREATE TABLE "lrt_point_recipient" ("id" character varying NOT NULL, "balance" numeric NOT NULL, "points" numeric NOT NULL, "points_date" TIMESTAMP WITH TIME ZONE NOT NULL, "referral_points" numeric NOT NULL, "el_points" numeric NOT NULL, "referral_count" integer NOT NULL, "referrer_count" integer NOT NULL, CONSTRAINT "PK_d92d1946162990fb7f6e9418211" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_806e89bce71b9c55c6160e32fd" ON "lrt_point_recipient" ("points_date") `)
        await db.query(`CREATE TABLE "lrt_balance_data" ("id" character varying NOT NULL, "referral_id" text, "points_date" TIMESTAMP WITH TIME ZONE NOT NULL, "points" numeric NOT NULL, "referral_points_base" numeric NOT NULL, "asset" text, "source" text, "balance" numeric NOT NULL, "balance_date" TIMESTAMP WITH TIME ZONE NOT NULL, "recipient_id" character varying, CONSTRAINT "PK_0ea0b2d704eb121ed0f6061531b" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_61e40cacf71c10157332c95dc2" ON "lrt_balance_data" ("recipient_id") `)
        await db.query(`CREATE INDEX "IDX_0b03feb3bcdd16517c08bae903" ON "lrt_balance_data" ("referral_id") `)
        await db.query(`CREATE TABLE "lrt_point_recipient_history" ("id" character varying NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "block_number" integer NOT NULL, "recipient" text NOT NULL, "balance" numeric NOT NULL, "points" numeric NOT NULL, "points_date" TIMESTAMP WITH TIME ZONE NOT NULL, "referral_points" numeric NOT NULL, "el_points" numeric NOT NULL, "referral_count" integer NOT NULL, "referrer_count" integer NOT NULL, CONSTRAINT "PK_831d0d299f8efd82c12b9494eb7" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_2acff968089f8162d351cb5ca2" ON "lrt_point_recipient_history" ("timestamp") `)
        await db.query(`CREATE INDEX "IDX_1f6e4a56e1106f11a50d5b30d8" ON "lrt_point_recipient_history" ("block_number") `)
        await db.query(`CREATE INDEX "IDX_25c0e476ca31abd7a74a8b4a9c" ON "lrt_point_recipient_history" ("points_date") `)
        await db.query(`CREATE TABLE "lrt_summary" ("id" character varying NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "block_number" integer NOT NULL, "balance" numeric NOT NULL, "points" numeric NOT NULL, "el_points" numeric NOT NULL, CONSTRAINT "PK_20cc1ddd92e29b97d990c95c130" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_68e45ce3e1da597d030f27acf6" ON "lrt_summary" ("timestamp") `)
        await db.query(`CREATE INDEX "IDX_82cd3e23b0a7a65b75773ae865" ON "lrt_summary" ("block_number") `)
        await db.query(`CREATE TABLE "lrt_eigen_point_calculation" ("id" character varying NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "block_number" integer NOT NULL, "amount" numeric NOT NULL, "points" numeric NOT NULL, CONSTRAINT "PK_5ee2eb8150893137ccfe0e623a1" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_df76046e9acd03f2e874fbe755" ON "lrt_eigen_point_calculation" ("timestamp") `)
        await db.query(`CREATE INDEX "IDX_11fdafe22805d7aee2c2733496" ON "lrt_eigen_point_calculation" ("block_number") `)
        await db.query(`CREATE TABLE "lrt_campaign" ("id" character varying NOT NULL, "campaign" text NOT NULL, "balance" numeric NOT NULL, "el_points" numeric NOT NULL, CONSTRAINT "PK_f1c8afec8631335444fda0553b6" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_c4975b5dfbe0e38d86c6cf1bab" ON "lrt_campaign" ("campaign") `)
        await db.query(`CREATE TABLE "lrt_campaign_history" ("id" character varying NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "block_number" integer NOT NULL, "campaign" text NOT NULL, "balance" numeric NOT NULL, "el_points" numeric NOT NULL, CONSTRAINT "PK_94963d7905722179b8bdf7951ed" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_e148892101bb51f8f9d399c35e" ON "lrt_campaign_history" ("timestamp") `)
        await db.query(`CREATE INDEX "IDX_c92bce4646c694f9b431c80d40" ON "lrt_campaign_history" ("block_number") `)
        await db.query(`CREATE INDEX "IDX_60d0f5849e6d67257adc977924" ON "lrt_campaign_history" ("campaign") `)
        await db.query(`CREATE TABLE "lrt_campaign_recipient" ("id" character varying NOT NULL, "campaign" text NOT NULL, "recipient" text NOT NULL, "balance" numeric NOT NULL, "el_points" numeric NOT NULL, CONSTRAINT "PK_6b9b5e0cc6d37559bf309e9f805" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_56870344afd029ba071b4085a5" ON "lrt_campaign_recipient" ("campaign") `)
        await db.query(`CREATE INDEX "IDX_d6383826212efcad676f1c5136" ON "lrt_campaign_recipient" ("recipient") `)
        await db.query(`CREATE TABLE "lrt_withdrawal" ("id" character varying NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "block_number" integer NOT NULL, "status" character varying(9) NOT NULL, "staker" text NOT NULL, "delegated_to" text NOT NULL, "withdrawer" text NOT NULL, "nonce" numeric NOT NULL, "start_block" integer NOT NULL, "strategies" text array, "shares" text array, CONSTRAINT "PK_c9c5b77cfb9595f58324c086eea" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_5e5f0e382d6145e44b1147a3e7" ON "lrt_withdrawal" ("timestamp") `)
        await db.query(`CREATE INDEX "IDX_7a435bfe04e5fdc55426b75198" ON "lrt_withdrawal" ("block_number") `)
        await db.query(`ALTER TABLE "lrt_balance_data" ADD CONSTRAINT "FK_61e40cacf71c10157332c95dc20" FOREIGN KEY ("recipient_id") REFERENCES "lrt_point_recipient"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    }

    async down(db) {
        await db.query(`DROP TABLE "lrt_deposit"`)
        await db.query(`DROP INDEX "public"."IDX_1710650fa59a4c8ff61af698b3"`)
        await db.query(`DROP INDEX "public"."IDX_14fae3388d6cb222f07f3d2584"`)
        await db.query(`DROP INDEX "public"."IDX_229ca7f410f04404b865d2830f"`)
        await db.query(`DROP INDEX "public"."IDX_0a317fd9c746c1695a7515e8fb"`)
        await db.query(`DROP TABLE "lrt_point_recipient"`)
        await db.query(`DROP INDEX "public"."IDX_806e89bce71b9c55c6160e32fd"`)
        await db.query(`DROP TABLE "lrt_balance_data"`)
        await db.query(`DROP INDEX "public"."IDX_61e40cacf71c10157332c95dc2"`)
        await db.query(`DROP INDEX "public"."IDX_0b03feb3bcdd16517c08bae903"`)
        await db.query(`DROP TABLE "lrt_point_recipient_history"`)
        await db.query(`DROP INDEX "public"."IDX_2acff968089f8162d351cb5ca2"`)
        await db.query(`DROP INDEX "public"."IDX_1f6e4a56e1106f11a50d5b30d8"`)
        await db.query(`DROP INDEX "public"."IDX_25c0e476ca31abd7a74a8b4a9c"`)
        await db.query(`DROP TABLE "lrt_summary"`)
        await db.query(`DROP INDEX "public"."IDX_68e45ce3e1da597d030f27acf6"`)
        await db.query(`DROP INDEX "public"."IDX_82cd3e23b0a7a65b75773ae865"`)
        await db.query(`DROP TABLE "lrt_eigen_point_calculation"`)
        await db.query(`DROP INDEX "public"."IDX_df76046e9acd03f2e874fbe755"`)
        await db.query(`DROP INDEX "public"."IDX_11fdafe22805d7aee2c2733496"`)
        await db.query(`DROP TABLE "lrt_campaign"`)
        await db.query(`DROP INDEX "public"."IDX_c4975b5dfbe0e38d86c6cf1bab"`)
        await db.query(`DROP TABLE "lrt_campaign_history"`)
        await db.query(`DROP INDEX "public"."IDX_e148892101bb51f8f9d399c35e"`)
        await db.query(`DROP INDEX "public"."IDX_c92bce4646c694f9b431c80d40"`)
        await db.query(`DROP INDEX "public"."IDX_60d0f5849e6d67257adc977924"`)
        await db.query(`DROP TABLE "lrt_campaign_recipient"`)
        await db.query(`DROP INDEX "public"."IDX_56870344afd029ba071b4085a5"`)
        await db.query(`DROP INDEX "public"."IDX_d6383826212efcad676f1c5136"`)
        await db.query(`DROP TABLE "lrt_withdrawal"`)
        await db.query(`DROP INDEX "public"."IDX_5e5f0e382d6145e44b1147a3e7"`)
        await db.query(`DROP INDEX "public"."IDX_7a435bfe04e5fdc55426b75198"`)
        await db.query(`ALTER TABLE "lrt_balance_data" DROP CONSTRAINT "FK_61e40cacf71c10157332c95dc20"`)
    }
}
